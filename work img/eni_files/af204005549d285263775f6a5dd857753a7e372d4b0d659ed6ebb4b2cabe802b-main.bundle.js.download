(()=>{var D='<svg class="icon" width="17" height="17" viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.983 12.691H4.275l-2.467 3.083a.667.667 0 01-1.187-.416V3.996A2.641 2.641 0 013.26 1.358h10.723a2.64 2.64 0 012.638 2.638v6.057a2.64 2.64 0 01-2.638 2.638zm1.305-8.695c0-.72-.586-1.305-1.305-1.305H3.26c-.72 0-1.306.586-1.306 1.305v9.462l1.48-1.85c.008-.01.02-.013.028-.023.031-.035.068-.06.106-.089.033-.024.064-.05.1-.067.036-.018.075-.025.114-.036.046-.012.09-.025.138-.027.012-.001.022-.008.034-.008h10.03c.718 0 1.304-.585 1.304-1.305V3.996zm-3.5 4.695H5.455c-.7 0-1.267-.298-1.267-.666 0-.368.568-.667 1.267-.667h6.335c.699 0 1.267.299 1.267.667 0 .368-.568.666-1.267.666zm0-2.643H5.454c-.7 0-1.267-.299-1.267-.667 0-.368.567-.666 1.267-.666h6.334c.7 0 1.267.298 1.267.666 0 .368-.567.667-1.267.667z"/></svg>';var k='<svg class="icon" width="17" height="17" viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.425 10.495a.663.663 0 01-.942 0l-.88-.879c-.184 3.621-3.033 6.409-6.647 6.409a.667.667 0 010-1.334c2.855 0 5.114-2.183 5.312-5.038l-.842.842a.665.665 0 01-.942 0 .664.664 0 010-.941l2-2v-.002a.67.67 0 01.47-.194.675.675 0 01.47.193l.002.002 2 2a.664.664 0 010 .942zm-2.763-3.893a.667.667 0 01-.91-.244c-1.39-2.406-4.284-3.434-6.962-2.575l.987.265a.667.667 0 01-.345 1.288L3.803 4.63a.659.659 0 01-.483-.615.654.654 0 01.052-.352l.663-2.477a.667.667 0 011.288.345l-.298 1.114c3.401-1.262 7.12-.006 8.88 3.046a.667.667 0 01-.243.911zM2.144 10.531a5.415 5.415 0 002.346 3.207l-.234-.875a.667.667 0 111.288-.344l.703 2.629a.667.667 0 01-.471.816l-2.627.704a.668.668 0 01-.345-1.288l1.24-.333-.031-.018c-1.566-.903-2.688-2.38-3.158-4.157a6.81 6.81 0 01.677-5.18.666.666 0 111.154.666 5.486 5.486 0 00-.542 4.173z"/></svg>';var E='<svg class="icon" width="18" height="17" viewBox="0 0 18 17" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.827 7.23c.26-.26.682-.26.943 0l1.51 1.51c.11-.028.223-.049.341-.049a1.335 1.335 0 010 2.667 1.335 1.335 0 01-1.333-1.333c0-.119.02-.232.05-.342l-1.511-1.51a.667.667 0 010-.942zm9.265-2.067L16.064 6.19a6.62 6.62 0 011.224 3.834 6.674 6.674 0 01-6.667 6.666 6.677 6.677 0 01-4.968-2.22.667.667 0 01.994-.89 5.34 5.34 0 003.974 1.777 5.34 5.34 0 005.333-5.333 5.34 5.34 0 00-5.333-5.334 5.33 5.33 0 00-4.055 1.87.666.666 0 11-1.012-.867 6.654 6.654 0 014.4-2.3v-1.37h-.666a.667.667 0 010-1.333h2.667a.666.666 0 110 1.334h-.667v1.367a6.62 6.62 0 013.167 1.19l1.028-1.029c.26-.26.683-.26.943 0l.666.667c.26.26.26.683 0 .943zM4.622 8.69H1.288a.667.667 0 110-1.333h3.333a.667.667 0 010 1.333zm-2.001.667h4a.667.667 0 010 1.333h-4a.667.667 0 010-1.333zm.667 2h2a.666.666 0 110 1.333h-2a.667.667 0 110-1.333z"/></svg>';var p="dtoi",N={activity:{icon:k,periods:["daily","weekly","monthly"],title:"Activity",description:"usage-metrics-activity-description"},feedback:{icon:D,periods:["monthly"],title:"Feedback",description:"usage-metrics-feedback-description"},query:{icon:E,title:"Query Count",description:"usage-metrics-querycount-description",periods:["daily"],acum:e=>(e||0)+1,withTiming:!0},retention:{},gmix:{periods:["daily"]},indepscore:{instant:!0},optout:{instant:!0},optin:{instant:!0},disableDiscussions:{instant:!0},enableDiscussions:{instant:!0}};var u={getItem:e=>{try{return JSON.parse(localStorage.getItem(e))}catch{return null}},setItem:(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch{}},removeItem:e=>{try{localStorage.removeItem(e)}catch{}},getAllKeys:()=>{let e=localStorage.length,t=[];for(let o=0;o<e;o++)t.push(localStorage.key(o));return t}};var O="usageMetrics.";function h(e){return`${O}${e}`}function c(e){return u.getItem(h(e))}function s(e,t){u.setItem(h(e),t)}function w(e){u.removeItem(h(e))}function g(e){return u.getItem(h(e))!==null}function _(){return u.getAllKeys().filter(e=>e.startsWith(O)).map(e=>e.slice(O.length))}function L(e){let t=e.length,o=u.getAllKeys();for(let i of o)i.startsWith(e)&&(s(i.slice(t),u.getItem(i)),u.removeItem(i))}var I={maptiles:"https://tiles.search.brave.com/maptiles",production:!0,watch_mode:!1};var Fe=(()=>{if(typeof window>"u")return{};let e=window?.document?.getElementById("js-shared")?.getAttribute("data");if(!e)return{};try{return JSON.parse(e)}catch{return{}}})(),Ne=I.production?()=>{}:console.log,_e=I.production?()=>{}:console.error;function re(){if(document.cookie){let e=document.cookie.split(";").map(o=>o.trim()).map(o=>o.split("=")),t={};for(let o=0;o<e.length;o+=1){let[i,r]=e[o];t[i]=r}return t}return{}}function $(){return re().fallback==="1"}function ae(e,t){return fetch(e,{credentials:I.production?"omit":"same-origin",method:"POST",mode:"no-cors",body:JSON.stringify(t),referrerPolicy:"no-referrer",headers:{"Referrer-Policy":"no-referrer"}})}function R(e){return ae("/api/feedback",e)}function G(){return localStorage.getItem("app.usageMetricsOptOut")==="true"}function U(){if(typeof window>"u")return!1;let{performance:e={}}=window;if(e?.getEntriesByType("navigation")[0]?.type==="reload")return!0;let t=e?.navigation?.type;return t!==void 0&&t===e?.navigation?.TYPE_RELOAD}function B(){return JSON.parse(localStorage.getItem("app.indepScore"))||[]}function q(){return new Date().toISOString().slice(0,4)}function K(e){return e.replace(/[.*+?^/${}()|[\]\\]/g,"")}function ie(e){if(e.length>15){let t=K(e.split("?")[0]);return t.length>15?"":t}return K(e)}function se(e=Date.now()){e=new Date(e);let t=e.getDay(),o=e.getDate()-t+(t===0?-6:1);return new Date(e.setDate(o))}function f(e=Date.now()){return new Date(e).toISOString().slice(0,10)}function W(){return f().slice(0,7)}function Y(){let e=new Date,t=6048e5,o=new Date(e.getFullYear(),0,1);return o.setDate(o.getDate()+(1-o.getDay()%7)),`${q()}-${Math.round((e-o)/t)+1}`}function z(){return`${q()}-${Math.round((new Date-new Date(new Date().getFullYear(),0,0))/864e5)}`}function J(){let{location:{hash:e}}=window;if(g("channel"))return c("channel");if(e&&e.includes("channel=")){let t=e.slice(e.indexOf("channel=")+8);s("channel",ie(t))}else s("channel","");return c("channel")}function T(e){return Math.floor(e/864e5)}function C(){return g(p)||s(p,f(Date.now())),c(p)}function ce(){let e=C();return new Date(e).getTime()}function V(){let e=ce(),t=T(Date.now()-e);return f(t<14?e:se(e))}function H(){let e="installts",t=c(e);if(!t)return;let o=f(Number(t));s("dtoi",o),w(e)}var Q=["q1","q2"];function j(e,t){let o=`goal.${e}`;if(g(o))return c(o);let r=B().reduce((d,l)=>d+l[1],0),a=null;return r>=t&&(a={g:e,date:f()},s(o,a)),a}function P(){let e=[],t=j("q1",3),o=j("q2",10);return t!==null&&e.push(t),o!==null&&e.push(o),e}var{localStorage:le,performance:ue}=window,Z=6,{browser:fe,os:de,is_dev:me}=JSON.parse(document.getElementById("js-telemetry").getAttribute("data"));function pe(){let e=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","duration","fetchStart","loadEventEnd","loadEventStart","redirectCount","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","workerStart"],t=ue?.getEntriesByType("navigation")[0]||{},o={};for(let r of e)o[r]=t[r];let i=t.serverTiming||[];for(let{name:r,duration:a}of i)o[`serverTiming-${r}`]=a;return o}function X(e,t,o,i=!1){let r={type:t,behavior:o,meta:{dev:me,version:Z,date:f(),static:{channel:J(),os:de,browser:navigator.brave?"Brave":fe,dtoi:V()},timing:i?pe():void 0},t:2};for(let a of Q)if(t.startsWith(`activity_${a}`)){let d=P();r.meta.completed=d.filter(l=>l.g===a).map(l=>l.date)[0];break}if(e==="query"){let d=new URL(window.location.href).searchParams.get("source");r.meta.source=d}return R(r)}function n(e,{suffix:t=[],data:o}={}){if(G()&&e!=="optout")return;let{periods:i=["once"],acum:r=()=>!0,withTiming:a=!1,instant:d=!1}=N[e],l=`${e}${t.length>0?"_":""}${t.join("_")}`;if(d){X(e,l,o,a);return}let A=`metric_${l}`,y=c(A)||{},v=[];for(let m of i){let{key:x,value:S}=y[m]||{},F=ge[m](x);x!==F&&(S=void 0);let b=r(S,o);b!==S&&v.push([m,b]),y[m]={key:F,value:b}}if(v.length>0){s(A,y);for(let[m,x]of v)X(e,`${l}${m?".":""}${m}`,x,a)}}var ge={daily:z,weekly:Y,monthly:W,once:()=>""},ee=["search","images","news","videos"],M={load:({target:e})=>{let t=e.location.pathname.split("/").slice(1).filter(a=>a).join("/")||"home";n("activity"),n("activity",{suffix:[t]});let o=P();for(let a of o)n("activity",{suffix:[a.g]});let i=new Date(C()),r=T(Date.now()-i.getTime());r>=1&&n("retention",{suffix:["day"]}),r>=7&&n("retention",{suffix:["week"]}),r>=28&&n("retention",{suffix:["month"]}),ee.includes(t)&&!U()&&(n("query"),n("query",{suffix:[t]})),$()&&n("gmix")},SearchFeedback:()=>{n("feedback")},OptOutUsageMetrics:()=>n("optout"),OptInUsageMetrics:()=>n("optin"),DisableDiscussions:()=>n("disableDiscussions"),EnableDiscussions:()=>n("enableDiscussions"),GmixDismissed:()=>n("gmix",{suffix:["dismissed"]}),GmixEnabled:()=>n("gmix",{suffix:["enabled"]}),GmixDisabled:()=>n("gmix",{suffix:["disabled"]}),GmixShown:()=>n("gmix",{suffix:["shown"]}),Score:e=>n("indepscore",{data:e.detail})};function xe(){return parseInt(le.getItem("telemetry.version")||c("version"))}function he(){switch(xe()){case 1:case 2:{L("telemetry.");let e=_();for(let t of e)t.startsWith("metric_query_")&&(ee.includes(t.split("_")[2])||w(t));break}case 3:case 4:case 5:H();default:break}s("version",Z)}he();for(let e in M)window.addEventListener(e,(...t)=>setTimeout(()=>M[e](...t),0));document.readyState==="complete"&&M.load({target:document});})();
